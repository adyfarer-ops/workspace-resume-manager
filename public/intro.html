<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä»‹ç» - å®æ—¶æ›´æ–°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .skill-tag {
            transition: all 0.3s ease;
        }
        .skill-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .loading {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .status-live {
            background-color: #dcfce7;
            color: #166534;
        }
        .status-local {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- åŠ è½½çŠ¶æ€ -->
    <div id="loading" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-gray-600">æ­£åœ¨ä»æ•°æ®åº“åŠ è½½...</p>
        </div>
    </div>

    <!-- ä¸»å†…å®¹ -->
    <div id="content" class="hidden">
        <!-- Hero Section -->
        <div class="gradient-bg text-white py-20">
            <div class="container mx-auto px-4 text-center">
                <div class="relative inline-block mb-6">
                    <img id="avatar" src="" alt="å¤´åƒ" class="w-32 h-32 rounded-full border-4 border-white shadow-lg object-cover">
                    <div class="absolute bottom-0 right-0 w-6 h-6 bg-green-400 rounded-full border-2 border-white"></div>
                </div>
                <h1 id="name" class="text-4xl font-bold mb-2"></h1>
                <p id="title" class="text-xl text-indigo-100 mb-4"></p>
                <p id="quote" class="text-lg italic text-indigo-200 max-w-2xl mx-auto"></p>
                <!-- æ•°æ®çŠ¶æ€æ ‡è¯† -->
                <div class="mt-4">
                    <span id="data-status" class="status-badge"></span>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <div class="container mx-auto px-4 -mt-10">
            <div class="max-w-4xl mx-auto">
                <!-- å…³äºæˆ‘ -->
                <div class="bg-white rounded-2xl card-shadow p-8 mb-6 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </span>
                        å…³äºæˆ‘
                    </h2>
                    <p id="about" class="text-gray-600 leading-relaxed"></p>
                </div>

                <!-- è”ç³»æ–¹å¼ -->
                <div class="bg-white rounded-2xl card-shadow p-8 mb-6 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </span>
                        è”ç³»æ–¹å¼
                    </h2>
                    <div id="contact" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </div>
                </div>

                <!-- æŠ€èƒ½æ ‡ç­¾ -->
                <div class="bg-white rounded-2xl card-shadow p-8 mb-6 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </span>
                        æ ¸å¿ƒæŠ€èƒ½
                    </h2>
                    <div id="skills" class="space-y-4">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </div>
                </div>

                <!-- å·¥ä½œç»å† -->
                <div class="bg-white rounded-2xl card-shadow p-8 mb-6 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                        </span>
                        å·¥ä½œç»å†
                    </h2>
                    <div id="experiences" class="space-y-6">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </div>
                </div>

                <!-- ç²¾é€‰é¡¹ç›® -->
                <div class="bg-white rounded-2xl card-shadow p-8 mb-6 fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                        <span class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mr-3">
                            <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                            </svg>
                        </span>
                        ç²¾é€‰é¡¹ç›®
                    </h2>
                    <div id="projects" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </div>
                </div>

                <!-- æ›´æ–°æ—¶é—´ -->
                <div class="text-center text-gray-400 text-sm py-8 fade-in">
                    <p>æœ€åæ›´æ–°: <span id="updated_at"></span></p>
                    <p class="mt-2">ç”± ç®€å†åŠ©æ‰‹ è‡ªåŠ¨ç”Ÿæˆ</p>
                    <p class="mt-1 text-xs text-gray-300">
                        æ•°æ®æ¥æº: <span id="api_source"></span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Supabase é…ç½®
        const SUPABASE_URL = 'https://riieooizyhovmgvhpcxj.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpaWVvb2l6eWhvdm1ndmhwY3hqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0MDI4NTAsImV4cCI6MjA4Njk3ODg1MH0._ljslXTlbVvW1Ilx1uD9yHRoPDlnWklfW1TpVg-HG4w';

        // æœ¬åœ°å¤‡ä»½æ•°æ®
        const LOCAL_DATA = {
            id: "personal-intro",
            name: "å®‰é¼ç¦¹",
            title: "Webå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ / AIæ™ºèƒ½ä½“å¼€å‘ / AIç¼–ç¨‹",
            quote: "å·å¾—æµ®ç”ŸåŠæ—¥é—²ï¼Œæ˜å¤©ä¾æ—§æ‰“å·¥äººã€‚",
            avatar: "https://picsum.photos/400/400?grayscale",
            about: "æ‹¥æœ‰æ‰å®çš„å‰ç«¯å¼€å‘ç»éªŒï¼Œå¹¶ç§¯ææ‹¥æŠ±AIæŠ€æœ¯å˜é©ã€‚ä¸ä»…åœ¨ä¼ ç»ŸWebå¼€å‘é¢†åŸŸæœ‰ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ›´åœ¨AI Agentå¼€å‘ã€Cozeå·¥ä½œæµæ­å»ºåŠè‡ªåª’ä½“è¿è¥æ–¹é¢å–å¾—äº†æ˜¾è‘—æˆæœã€‚å…·å¤‡å…¨æ ˆæ€ç»´ä¸äº§å“æ„è¯†ï¼Œèƒ½å¤Ÿåˆ©ç”¨AIå·¥å…·èµ‹èƒ½å¼€å‘ï¼Œå®ç°ä»0åˆ°1çš„äº§å“è½åœ°ä¸æµé‡å¢é•¿ã€‚",
            contact: {
                age: 27,
                location: "æ²³å—",
                phone: "17630830323",
                email: "yfarer@163.com"
            },
            skills: {
                technical: [
                    { category: "AI æ™ºèƒ½ä½“å¼€å‘", items: ["n8n", "Dify", "Coze(æ‰£å­)", "Workflowç¼–æ’", "Prompt Engineering"] },
                    { category: "Web å¼€å‘", items: ["Vue3", "HTML5", "CSS3", "JavaScript", "å°ç¨‹åº", "Uni-app"] },
                    { category: "AI å·¥å…·ä½¿ç”¨", items: ["Kimi.ai", "GPT-4", "Gemini", "Sora2", "å³æ¢¦", "è±†åŒ…"] },
                    { category: "AI ç¼–ç¨‹å·¥å…·", items: ["Cursor", "Trae", "Kiro", "Antigravity"] }
                ],
                soft: ["å…¨æ ˆæ€ç»´", "äº§å“æ„è¯†", "å›¢é˜Ÿåä½œ", "æŠ€æœ¯æŒ‡å¯¼", "è‡ªåª’ä½“è¿è¥"]
            },
            experiences: [
                {
                    company: "ä¸Šæµ·æ˜Ÿæ¼«ç§‘æŠ€æœ‰é™å…¬å¸",
                    position: "Webå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
                    period: "2021.05 - 2023.03",
                    description: "è´Ÿè´£Webã€H5ä»¥åŠå°ç¨‹åºé¡µé¢çš„å¼€å‘...",
                    achievements: ["å®Œæˆå°ç¨‹åºå•†åŸæ”¯ä»˜åŠŸèƒ½å¼€å‘", "å¯¹æ¥è…¾è®¯äº‘ç›´æ’­å’Œäº‘ç‚¹æ’­"]
                },
                {
                    company: "ä¸Šæµ·ä¸­åœ³ç§‘æŠ€æœ‰é™å…¬å¸",
                    position: "Webå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
                    period: "2019.07 - 2021.04",
                    description: "è´Ÿè´£è€é¡¹ç›®çš„ä¼˜åŒ–è¿­ä»£ä¸æ–°é¡µé¢å¼€å‘...",
                    achievements: ["å¯¹Elementç»„ä»¶è¿›è¡ŒäºŒæ¬¡å°è£…", "ä½¿ç”¨Uni-appå¼€å‘è·¨å¹³å°åº”ç”¨"]
                }
            ],
            projects: [
                { name: "AIç¼–ç¨‹å·¥å…·åº”ç”¨", description: "åˆ©ç”¨AIç¼–ç¨‹å·¥å…·æå‡å¼€å‘æ•ˆç‡", tags: ["Kiro", "MCP", "Skills"], highlight: true },
                { name: "æœ€åäº¿æ¬¡", description: "ä¸ªäººå°ç¨‹åºï¼ˆå·²ä¸Šæ¶ï¼‰- ä¹ æƒ¯å…»æˆåº”ç”¨", tags: ["å…¨æ ˆ", "å·²ä¸Šæ¶"], highlight: true },
                { name: "å²æ—¶è®°", description: "äºŒåå››èŠ‚æ°”ç®€å†ç½‘ç«™", tags: ["å‰ç«¯", "å¼€æº"], highlight: true }
            ],
            updated_at: new Date().toISOString()
        };

        // ä» Supabase è·å–æ•°æ®
        async function fetchFromSupabase() {
            try {
                console.log('Fetching from Supabase...');
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/personal_intro?id=eq.personal-intro`,
                    {
                        method: 'GET',
                        headers: {
                            'apikey': SUPABASE_KEY,
                            'Authorization': `Bearer ${SUPABASE_KEY}`,
                            'Accept': 'application/json'
                        }
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Supabase data:', data);
                
                if (data && data.length > 0) {
                    return { data: data[0], source: 'live' };
                } else {
                    throw new Error('No data found in Supabase');
                }
            } catch (error) {
                console.warn('Supabase fetch failed:', error.message);
                return { data: LOCAL_DATA, source: 'local' };
            }
        }

        // æ¸²æŸ“é¡µé¢
        function render(data, source) {
            // åŸºæœ¬ä¿¡æ¯
            document.getElementById('avatar').src = data.avatar || LOCAL_DATA.avatar;
            document.getElementById('name').textContent = data.name || LOCAL_DATA.name;
            document.getElementById('title').textContent = data.title || LOCAL_DATA.title;
            document.getElementById('quote').textContent = data.quote || LOCAL_DATA.quote;
            document.getElementById('about').textContent = data.about || LOCAL_DATA.about;

            // æ•°æ®çŠ¶æ€æ ‡è¯†
            const statusBadge = document.getElementById('data-status');
            if (source === 'live') {
                statusBadge.className = 'status-badge status-live';
                statusBadge.innerHTML = 'ğŸŸ¢ å®æ—¶æ•°æ®';
            } else {
                statusBadge.className = 'status-badge status-local';
                statusBadge.innerHTML = 'ğŸŸ¡ æœ¬åœ°ç¼“å­˜';
            }

            // è”ç³»æ–¹å¼
            const contact = data.contact || LOCAL_DATA.contact;
            const contactHTML = `
                <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                    <span class="text-2xl mr-3">ğŸ“</span>
                    <div>
                        <p class="text-sm text-gray-500">æ‰€åœ¨åœ°</p>
                        <p class="font-medium">${contact.location || 'æ²³å—'}</p>
                    </div>
                </div>
                <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                    <span class="text-2xl mr-3">ğŸ“§</span>
                    <div>
                        <p class="text-sm text-gray-500">é‚®ç®±</p>
                        <p class="font-medium">${contact.email || 'yfarer@163.com'}</p>
                    </div>
                </div>
                <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                    <span class="text-2xl mr-3">ğŸ“±</span>
                    <div>
                        <p class="text-sm text-gray-500">ç”µè¯</p>
                        <p class="font-medium">${contact.phone || '17630830323'}</p>
                    </div>
                </div>
            `;
            document.getElementById('contact').innerHTML = contactHTML;

            // æŠ€èƒ½
            const skills = data.skills || LOCAL_DATA.skills;
            let skillsHTML = '';
            if (skills.technical) {
                skills.technical.forEach(skill => {
                    skillsHTML += `
                        <div class="mb-4">
                            <h3 class="font-semibold text-gray-700 mb-2">${skill.category}</h3>
                            <div class="flex flex-wrap gap-2">
                                ${skill.items.map(item => `
                                    <span class="skill-tag px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium">
                                        ${item}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    `;
                });
            }
            document.getElementById('skills').innerHTML = skillsHTML;

            // å·¥ä½œç»å†
            const experiences = data.experiences || LOCAL_DATA.experiences;
            const experiencesHTML = experiences.map(exp => `
                <div class="border-l-4 border-indigo-500 pl-4">
                    <h3 class="font-bold text-gray-800">${exp.company}</h3>
                    <p class="text-indigo-600 font-medium">${exp.position}</p>
                    <p class="text-sm text-gray-500 mb-2">${exp.period}</p>
                    <p class="text-gray-600 text-sm">${exp.description}</p>
                </div>
            `).join('');
            document.getElementById('experiences').innerHTML = experiencesHTML;

            // é¡¹ç›®
            const projects = (data.projects || LOCAL_DATA.projects).filter(p => p.highlight !== false);
            const projectsHTML = projects.map(project => `
                <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 hover:shadow-md transition-shadow">
                    <h3 class="font-bold text-gray-800 mb-2">${project.name}</h3>
                    <p class="text-gray-600 text-sm mb-3">${project.description}</p>
                    <div class="flex flex-wrap gap-1">
                        ${(project.tags || []).map(tag => `
                            <span class="px-2 py-0.5 bg-white text-gray-600 rounded text-xs">${tag}</span>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            document.getElementById('projects').innerHTML = projectsHTML;

            // æ›´æ–°æ—¶é—´
            const updatedAt = new Date(data.updated_at || Date.now());
            document.getElementById('updated_at').textContent = updatedAt.toLocaleString('zh-CN');
            document.getElementById('api_source').textContent = source === 'live' 
                ? 'Supabase å®æ—¶æ•°æ®åº“' 
                : 'æœ¬åœ°å¤‡ä»½æ•°æ®';

            // æ˜¾ç¤ºå†…å®¹ï¼Œéšè—åŠ è½½
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('content').classList.remove('hidden');
        }

        // åˆå§‹åŒ–
        async function init() {
            const { data, source } = await fetchFromSupabase();
            render(data, source);
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
