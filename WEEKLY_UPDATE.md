# 每周自动更新系统

## 概述

个人介绍更新和技能学习追踪使用**同样的方式**：
- 每周一早上 9:00 自动执行
- 分析上周 Agent 会话历史
- 生成总结报告
- 更新到数据库
- 发送报告给用户

## 定时任务

### 1. 技能学习追踪-每周总结
- **时间**: 每周一 09:00
- **任务ID**: `efb17755-3180-48fa-af1a-0152cc6c8060`
- **功能**: 
  - 分析 Agent 会话历史
  - 提取技能学习记录
  - 保存到 `skill_learning_logs` 表
  - 发送技能学习周报

### 2. 个人介绍自动更新-每周总结
- **时间**: 每周一 09:00
- **任务ID**: `215b75d4-fd87-4749-99ac-679e8d878f79`
- **功能**:
  - 分析 Agent 会话历史
  - 生成更新的个人介绍
  - 更新 `data/profile.json`
  - 同步到 Supabase
  - 发送更新报告

## 工作流程

```
每周一 09:00
    ↓
定时任务触发
    ↓
分析上周 Agent 会话
    ↓
生成总结报告
    ↓
┌─────────────┬─────────────┐
↓             ↓             ↓
技能学习记录  个人介绍更新   发送报告
    ↓             ↓
skill_learning  profile.json
    ↓             ↓
   数据库      数据库+本地
```

## 手动执行

```bash
# 更新个人介绍并同步到数据库
./scripts/weekly-update.sh profile

# 更新技能
./scripts/weekly-update.sh skills

# 全部更新
./scripts/weekly-update.sh all
```

## 数据流向

### 技能学习追踪
```
Agent 会话 → 分析提取 → skill_learning_logs 表 → 周报
```

### 个人介绍更新
```
Agent 会话 → 分析总结 → profile.json → 同步到数据库 → 更新报告
```

## 统一特点

1. **同样的执行时间** - 每周一 09:00
2. **同样的数据来源** - Agent 会话历史
3. **同样的更新方式** - 自动分析生成
4. **同样的存储位置** - Supabase 数据库
5. **同样的报告机制** - 发送总结给用户

## 状态

- [x] 技能学习追踪定时任务
- [x] 个人介绍自动更新定时任务
- [x] 统一更新脚本
- [ ] 数据库表创建（等待执行）
